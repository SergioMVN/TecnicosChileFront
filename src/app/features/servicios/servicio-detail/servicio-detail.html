<section class="detail-page">
  <a routerLink="/servicios" class="back-link">‚Üê Volver a la lista</a>

  <h2 class="detail-title">Detalle del servicio</h2>

  @if (cargando()) {
    <div class="state state-loading">Cargando servicio...</div>
  } @else if (error()) {
    <!-- ‚¨ÖÔ∏è ESTE error es SOLO de CARGA -->
    <div class="state state-error">{{ error() }}</div>
  } @else if (servicio()) {
    <article class="detail-card">
      <h3 class="detail-card__title">
        {{ servicio()!.titulo }}
      </h3>

      <p class="detail-card__category">
        Categor√≠a: <span>{{ servicio()!.categoria }}</span>
      </p>

      <p class="detail-card__field">
        <span>Descripci√≥n:</span> {{ servicio()!.descripcion }}
      </p>

      <p class="detail-card__field">
        <span>Precio:</span> ${{ servicio()!.precio }}
      </p>

      <p class="detail-card__field">
        <span>T√©cnico:</span> {{ servicio()!.tecnicoNombre || 'Sin t√©cnico' }}
      </p>

      <div class="detail-card__actions">
        <button
          class="detail-card__action"
          (click)="contratar()"
          [disabled]="creandoReserva()"
        >
          {{ creandoReserva() ? 'Creando reserva...' : 'Contratar servicio' }}
        </button>
      </div>
    </article>
  }

  <!-- üü£ MODAL DE CONFIRMACI√ìN -->
  @if (modalConfirmAbierto()) {
    <div class="modal-backdrop">
      <div class="modal">
        <h3 class="modal__title">Confirmar reserva</h3>

        @if (servicio()) {
          <p class="modal__text">
            ¬øDeseas contratar el servicio
            <strong>{{ servicio()!.titulo }}</strong>
            por ${{ servicio()!.precio }}?
          </p>
        }

        <div class="modal__buttons">
          <button
            class="modal__button modal__button--secondary"
            (click)="cerrarConfirmacion()"
          >
            Cancelar
          </button>
          <button
            class="modal__button"
            (click)="confirmarContratacion()"
          >
            Confirmar
          </button>
        </div>
      </div>
    </div>
  }

  <!-- üü¢ MODAL DE RESULTADO (√©xito / error de la reserva) -->
  @if (modalAbierto()) {
    <div class="modal-backdrop">
      <div class="modal">
        <h3 class="modal__title">
          {{ modalTitulo() }}
        </h3>

        @if (mensajeOk()) {
          <p class="modal__text modal__text--ok">
            {{ mensajeOk() }}
          </p>
        } @else if (reservaError()) {
          <p class="modal__text modal__text--error">
            {{ reservaError() }}
          </p>
        }

        <button class="modal__button" (click)="cerrarModal()">
          Cerrar
        </button>
      </div>
    </div>
  }
</section>
